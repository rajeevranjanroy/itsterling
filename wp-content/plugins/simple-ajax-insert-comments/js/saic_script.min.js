jQuery(document).ready(function(e){function t(e){var t=SAIC.widthWrap?parseInt(SAIC.widthWrap,10):e.innerWidth();if(t>=290){e.find(".saic-wrap-textarea").width(t-132);e.find("iframe").attr("height","250px")}else{e.find(".saic-wrap-textarea").css("width","100%");e.find("iframe").attr("height","160px")}}function n(t,n,r){var t=String(t);var r=String(r);var i=e("#saic-link-"+t);var s=e("#commentform-"+t);var o=e("#saic-comment-status-"+t);var u=e("#saic-item-comment-"+n);var s=e("#commentform-"+t);var a=s.serialize();var f=s.attr("action");o.html('<div class="saic-loading saic-loading-2"></div>').show();e.ajax({type:"post",url:f,data:a,success:function(e,t){if(e!="error"){o.html('<p class="saic-ajax-success">Thanks for answering the comment!</p>');if(i.find("span").length){r=String(parseInt(r,10)+1);i.find("span").html(r)}if(!u.find("ul").length){u.append('<ul class="children"></ul>')}$wrapChild=u.find("ul");$wrapChild.append(e);s.find(".saic-textarea").val("").removeAttr("style").css("width","100%").attr("placeholder","Write a comment");s.find("#comment_parent").val("0");setTimeout(function(){c(u.find("ul li").last())},1e3)}else{o.html('<p class="saic-ajax-success-2">Error in processing your form.</p>')}},error:function(e,t,n){o.html('<p class="saic-ajax-error" >You might have left one of the fields blank, or duplicate comments.</p>')},complete:function(e,t){setTimeout(function(){o.fadeOut(600)},3e3);s.find(":submit").removeAttr("disabled")}});return false}function r(n,r){var n=String(n);var r=String(r);var i=e("#saic-link-"+n);var s=e("#commentform-"+n);var o=e("#saic-comment-status-"+n);var u=e("ul#saic-container-comment-"+n);var a=s.serialize();var l=s.attr("action");e.ajax({type:"post",url:l,data:a,beforeSend:function(){o.html('<div class="saic-loading saic-loading-2"></div>').show()},success:function(a,l){if(a!="error"){o.html('<p class="saic-ajax-success">Thanks for your comment!</p>');if(i.find("span").length){r=String(parseInt(r,10)+1);i.find("span").html(r)}}else{o.html('<p class="saic-ajax-success-2">Error in processing your form.</p>')}u.prepend(a).show();f(n,SAIC.numPerPage,true);s.find(".saic-textarea").val("").removeAttr("style").css("width","100%");e(".saic-wrapper").each(function(){t(e(this))})},error:function(e,t,n){o.html('<p class="saic-ajax-error" >You might have left one of the fields blank, or duplicate comments.</p>')},complete:function(e,t){setTimeout(function(){o.fadeOut(600)},3e3);s.find(":submit").removeAttr("disabled")}});return false}function i(n,r,i){var s=String(n);var r=parseInt(r,10);var o=e("#saic-link-"+s);var u=e("div#saic-wrap-commnent-"+s);u.slideToggle(200);if(e("ul#saic-container-comment-"+s).length){var a=e("ul#saic-container-comment-"+s);var l=e("#saic-comment-status-"+s);var c=a.html().replace(/\s+/g,"");if(c==""&&r>0){jQuery.ajax({type:"POST",dataType:"html",url:SAIC.ajaxurl,data:{action:"get_comments",post_id:s,get:i,nonce:SAIC.nonce},beforeSend:function(){l.html('<div class="saic-loading saic-loading-2"></div>').show()},success:function(n){l.html("").hide();a.html(n).show();f(s,SAIC.numPerPage);e(".saic-wrapper").each(function(){t(e(this))})}})}else{}}return false}function s(t){var n=true;var r=e("#saic-modal-url-link");var i=e("#saic-modal-text-link");var s="saic-textarea-"+t;if(r.val().length<1){n=false;r.addClass("saic-error")}if(i.val().length<1){n=false;i.addClass("saic-error")}if(n){var o=r.val().replace(/https?:\/\//gi,"");var u='<a href="http://'+o+'" title="'+i.val()+'" rel="nofollow" target="_blank">'+i.val()+"</a>";h(s,u);a()}return false}function o(t){var n=true;var r=e("#saic-modal-url-image");var i="saic-textarea-"+t;if(r.val().length<1){n=false;r.addClass("saic-error")}if(n){var s=r.val();var o='<img src="'+s+'" />';h(i,o);a()}return false}function u(t){var n=true;var r=e("#saic-modal-url-video");var i="saic-textarea-"+t;if(!e("#saic-modal-preview").find("iframe").length){n=false;e("#saic-modal-preview").html('<p class="saic-modal-error">Please check the video url</p>')}if(n){var s="<p>"+e("#saic-modal-preview").html()+"</p>";h(i,s);a()}return false}function a(){e("#saic-overlay, #saic-modal").remove();return false}function f(e,t,n){if(typeof jQuery.fn.jPages=="function"&&SAIC.jpages=="true"){var r=String(e);var i="saic-container-comment-"+r;var s="div.saic-holder-"+r;var o=jQuery("#"+i+" > li").length;if(o>t){if(n){jQuery("#"+i).children().removeClass("animated jp-hidden")}jQuery(s).show().jPages({containerID:i,previous:"← previous",next:"next →",perPage:parseInt(t,10),minHeight:false,keyBrowse:true,direction:"forward",animation:"fadeIn"})}}return false}function l(e){if(!e)e=5;var t=new Array(2);t["n1"]=Math.floor(Math.random()*e+1);t["n2"]=Math.floor(Math.random()*e+1);return t}function c(t){var n=t.attr("id");var r=e("#"+n).offset().top;var i=Math.abs(r-200);e("html,body").animate({scrollTop:i},"slow");return false}function h(e,t){var e=document.getElementById(e);if(document.selection){e.focus();var n=document.selection.createRange();n.text=t;return}else if(e.selectionStart||e.selectionStart=="0"){var r=e.selectionStart;var i=e.selectionEnd;var s=e.scrollTop;e.value=e.value.substring(0,r)+t+e.value.substring(i,e.value.length);e.focus();e.selectionStart=r+t.length;e.selectionEnd=r+t.length;e.scrollTop=s}else{e.value+=textArea.value;e.focus()}}function p(t,n){var r=e("#saic-comment-"+t).find(".saic-rating-count");var i=r.text();jQuery.ajax({type:"POST",url:SAIC.ajaxurl,data:{action:"comment_rating",comment_id:t,method:n,nonce:SAIC.nonce},beforeSend:function(){r.html("").addClass("saic-rating-loading")},success:function(t){var n=e.parseJSON(t);if(n.success==true){r.html(n.likes).attr("title",n.likes+" Likes");if(n.likes<0){r.removeClass().addClass("saic-rating-count saic-rating-negative")}else if(n.likes>0){r.removeClass().addClass("saic-rating-count saic-rating-positive")}else{r.removeClass().addClass("saic-rating-count saic-rating-neutral")}}else{r.html(i)}},error:function(e){r.html(i)},complete:function(e){r.removeClass("saic-rating-loading")}})}e(this).find(":submit").removeAttr("disabled");SAIC={ajaxurl:SAIC_WP.ajaxurl,nonce:SAIC_WP.saicNonce,textCounter:SAIC_WP.textCounter,textCounterNum:SAIC_WP.textCounterNum!=""?SAIC_WP.textCounterNum:300,jpages:SAIC_WP.jpages,numPerPage:SAIC_WP.jPagesNum!=""?SAIC_WP.jPagesNum:10,widthWrap:SAIC_WP.widthWrap!=""?SAIC_WP.widthWrap:"",autoLoad:SAIC_WP.autoLoad};e(".saic-wrapper").each(function(){t(e(this))});e(window).resize(function(){e(".saic-wrapper").each(function(){t(e(this))})});if(e(".saic-captcha").length){$n1=l(8)["n1"];$n2=l(8)["n2"];$textCaptcha=$n1+" + "+$n2;e(".saic-captcha-text").html($textCaptcha+" = ")}e(document).delegate("a.saic-link","click",function(t){t.preventDefault();var n=e(this).attr("id").replace("saic-link-","");var r=e(this).attr("href").split("=")[2].replace("&get","");var s=e(this).attr("href").split("=")[3];i(n,r,s);var o=setInterval(function(){if(e("li.saic-item-comment.depth-3").length){e("li.saic-item-comment.depth-3").find("a.saic-reply-link").remove();if(!e("li.saic-item-comment.depth-3").find("a.saic-reply-link").length){clearInterval(o)}}},1e3);return false});if(SAIC.autoLoad=="true"&&e("a.saic-link").length){e("a.saic-link").each(function(){e(this).click()})}e(".saic-wrapper").delegate("li.saic-item-comment","mouseover",function(t){t.stopPropagation();e(this).find(".saic-reply-link:first").show()});e(".saic-wrapper").delegate("li.saic-item-comment","mouseout",function(t){t.stopPropagation();e(this).find(".saic-reply-link").hide()});e(".saic-wrapper").delegate(".saic-reply-link","click",function(t){t.preventDefault();var n=e(this).attr("id").replace("saic-reply-link-","");var r=e(this).attr("href").split("=")[2];var i=e("#commentform-"+r);var s=e("#saic-comment-"+n).find("a.saic-commenter-name").text();i.find("#comment_parent").val(n);i.find(".saic-textarea").val("").attr("placeholder","Reply comment from "+s+", Press ESC to cancel").focus();c(i);e(document).keyup(function(e){if(e.which==27){i.find("#comment_parent").val("0");i.find(".saic-textarea").attr("placeholder","Write a comment")}});return false});$commentForm=e(".saic-container-form").find("form");$commentForm.submit(function(){e(this).find(":submit").attr("disabled","disabled");e("input, textarea").removeClass("saic-error");var t=e(this).attr("id");var i=t.replace("commentform-","");var s=e("#commentform-"+i);var o=e("#saic-link-"+i);var u=o.attr("href").split("=")[2];var a=true;var f=s.find("textarea").val().replace(/\s+/g," ");if(f.length<2){s.find(".saic-textarea").addClass("saic-error");s.find(".saic-error-info-text").show();setTimeout(function(){s.find(".saic-error-info-text").fadeOut(500)},2500);e(this).find(":submit").removeAttr("disabled");return false}else{if(e(this).find("input#email").length){var c=e(this).find("input#author");var h=c.val().replace(/\s+/g," ");var p=/^[^?&%$=\/]{2,30}$/i;var d=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,6}$/i;var v=e(this).find("input#email");var m=v.val().replace(/\s+/g,"");v.val(m);if(h==0||!p.test(h)){c.addClass("saic-error");s.find(".saic-error-info-name").show();setTimeout(function(){s.find(".saic-error-info-name").fadeOut(500)},3e3);a=false}if(!d.test(m)){v.addClass("saic-error");s.find(".saic-error-info-email").show();setTimeout(function(){s.find(".saic-error-info-email").fadeOut(500)},3e3);a=false}if(!a){e(this).find(":submit").removeAttr("disabled");return false}}if(e(".saic-captcha").length){var g=e("#saic-captcha-value-"+i);if(g.val()!=$n1+$n2){a=false;g.addClass("saic-error");$n1=l(8)["n1"];$n2=l(8)["n2"];$textCaptcha=$n1+" + "+$n2;e(".saic-captcha-text").html($textCaptcha+" = ");g.val("");e(this).find(":submit").removeAttr("disabled");return false}else{a=true;$n1=l(8)["n1"];$n2=l(8)["n2"];$textCaptcha=$n1+" + "+$n2;e(".saic-captcha-text").html($textCaptcha+" = ");g.val("")}}if(a){e(this).find(":submit").removeAttr("disabled");$commentID=parseInt(s.find("input#comment_parent").val(),10);if($commentID==0){r(i,u)}else{n(i,$commentID,u)}}else{e(this).find(":submit").removeAttr("disabled")}}return false});if(typeof jQuery.fn.textareaCount=="function"&&SAIC.textCounter=="true"){e(".saic-textarea").each(function(){var t={maxCharacterSize:SAIC.textCounterNum,originalStyle:"saic-counter-info",warningStyle:"saic-counter-warn",warningNumber:20,displayFormat:"#left"};e(this).textareaCount(t)})}if(typeof jQuery.fn.placeholder=="function"){e(".saic-wrap-form input, .saic-wrap-form textarea, #saic-modal input, #saic-modal textarea").placeholder()}if(typeof jQuery.fn.autosize=="function"){e("textarea.autosize-textarea").autosize({className:"autosize-textarea"})}e(".saic-modal-btn").on("click",function(t){t.preventDefault();var n=e(this).attr("href").split("=")[1].replace("&action","");var r=e(this).attr("href").split("=")[2];e("body").append('<div id="saic-overlay"></div>');e("#saic-overlay").css({opacity:.2,"z-index":9e5});e("body").append('<div id="saic-modal"></div>');$modalHtml='<div id="saic-modal-wrap"><span id="saic-modal-close"></span><div id="saic-modal-header"><h3 id="saic-modal-title">Título</h3></div><div id="saic-modal-content"><p>Hola</p></div><div id="saic-modal-footer"><a id="saic-modal-ok-'+n+'" class="saic-modal-ok saic-modal-btn" href="#">Accept</a><a class="saic-modal-cancel saic-modal-btn" href="#">Cancel</a></div></div>';e("#saic-modal").append($modalHtml).fadeIn(250);switch(r){case"url":e("#saic-modal").removeClass().addClass("saic-modal-url");e("#saic-modal-title").html("Insert link");e("#saic-modal-content").html('<input type="text" id="saic-modal-url-link" class="saic-modal-input" placeholder="Url link"/><input type="text" id="saic-modal-text-link" class="saic-modal-input" placeholder="Text to display"/>');break;case"image":e("#saic-modal").removeClass().addClass("saic-modal-image");e("#saic-modal-title").html("Insert Image");e("#saic-modal-content").html('<input type="text" id="saic-modal-url-image" class="saic-modal-input" placeholder="Url image"/><div id="saic-modal-preview"></div>');break;case"video":e("#saic-modal").removeClass().addClass("saic-modal-video");e("#saic-modal-title").html("Insert video");e("#saic-modal-content").html('<input type="text" id="saic-modal-url-video" class="saic-modal-input" placeholder="Url video youtube or vimeo"/><div id="saic-modal-preview"></div>');e("#saic-modal-footer").prepend('<a id="saic-modal-verifique-video" class="saic-modal-verifique saic-modal-btn" href="#">Check video</a>');break}});e(document).delegate(".saic-modal-ok","click",function(t){t.preventDefault();e("#saic-modal input, #saic-modal textarea").removeClass("saic-error");var n=e("#saic-modal").attr("class");var r=e(this).attr("id").replace("saic-modal-ok-","");switch(n){case"saic-modal-url":s(r);break;case"saic-modal-image":o(r);break;case"saic-modal-video":u(r);break}return false});e(document).delegate("#saic-modal input, #saic-modal textarea","focus",function(t){e(this).removeClass("saic-error")});e(document).delegate("#saic-modal-url-image","change",function(t){setTimeout(function(){e("#saic-modal-preview").html('<img src="'+e("#saic-modal-url-image").val()+'" />')},200)});e(document).delegate("#saic-modal-verifique-video","click",function(t){t.preventDefault();var n=e("#saic-modal-url-video");var r=n.val().replace(/\s+/g,"");n.removeClass("saic-error");e(this).attr("id","");if(r.length<1){n.addClass("saic-error");e(".saic-modal-video").find("a.saic-modal-verifique").attr("id","saic-modal-verifique-video");return false}var i="url_video="+r;e.ajax({url:SAIC.ajaxurl,data:i+"&action=verificar_video_SAIC",type:"POST",dataType:"html",beforeSend:function(){e("#saic-modal-preview").html('<div class="saic-loading saic-loading-2"></div>')},success:function(t){if(t!="error"){e("#saic-modal-preview").html(t)}else{e("#saic-modal-preview").html('<p class="saic-modal-error">Invalid video url</p>')}},error:function(t){e("#saic-modal-preview").html('<p class="saic-modal-error">Failed to process, try again</p>')},complete:function(t,n){e(".saic-modal-video").find("a.saic-modal-verifique").attr("id","saic-modal-verifique-video")}})});e(document).delegate("#saic-modal-close, .saic-modal-cancel","click",function(e){e.preventDefault();a();return false});e(".saic-wrapper").delegate("a.saic-rating-link","click",function(t){t.preventDefault();var n=e(this).attr("href").split("=")[1].replace("&method","");var r=e(this).attr("href").split("=")[2];p(n,r);return false})})